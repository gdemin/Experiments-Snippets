---
title: "Experiments&Snippets"
author: "Gregory Demin"
output: html_document
---

### 2014-11-08 Стандартное отклонение распределения выборочных средних (ЦПТ)

По идее, оно должно быть SD_выборки/sqrt(N_выборки) и не меняться с количеством повторов эксперимента. Эксперимент - это случайная выборка из N_sample элементов. Соответственно, мы повторяем этот эксперимент разное количество раз. 

```{r}

set.seed(20140811)
N_sample = 30
N_exp = c(10,50,100,200,500,1000,5000, 50000)

res = lapply(N_exp, function(N){
    experiments = replicate(N,mean(rnorm(N_sample)))
    c(mean = mean(experiments),sd = sd(experiments),sd_exper = 1/sqrt(N_sample))
    
    })

do.call(rbind,res) # две последние колонки должны быть примерно равны

```

Да, действительно не зависит от количества повторов. Впрочем, это было очевидно уже при написании программы. 
Заодно проверим покрытие - будет ли выборочное среднее в 95% случаях лежать в интервале +/-1.96*SD_выборки/sqrt(N_выборки).

```{r}

N_sample = 30
N_exp = c(10,50,100,200,500,1000,5000, 50000)

res = lapply(N_exp, function(N){
    experiments = replicate(N,abs(mean(rnorm(N_sample))) < 1.96/sqrt(N_sample))
    mean(experiments)
    
    })

do.call(rbind,res) # Должно быть в районе 0.95

```

Да, покрытие примерно 95%.

